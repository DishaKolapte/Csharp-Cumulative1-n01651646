
@{
    ViewBag.Title = "Ajax_Update";
}
<script>
    function UpdateTeacher(TeacherId) {

        console.log(TeacherId);

        //goal: send a request which looks like this:
        //POST : http:/api/TeacherData/UpdateTeacher/{id}
        

        var URL = "/api/TeacherData/UpdateTeacher/" + TeacherId;

        var rq = new XMLHttpRequest();

        var TeacherFname = document.getElementById('TeacherFname').value;
        var TeacherLname = document.getElementById('TeacherLname').value;
        var EmployeeNumber = document.getElementById('EmployeeNumber').value;
        var HireDate = document.getElementById('HireDate').value;
        var Salary = document.getElementById('Salary').value;



        var TeacherData = {
            "TeacherFname": TeacherFname,
            "TeacherLname": TeacherLname,
            "EmployeeNumber": EmployeeNumber,
            "HireDate": HireDate,
            "Salary": Salary
        };


        rq.open("POST", URL, true);
        rq.setRequestHeader("Content-Type", "application/json");
        rq.onreadystatechange = function () {
            //ready state should be 4 AND status should be 200
            if (rq.readyState == 4 && rq.status == 200) {
                //request is successful and the request is finished

                //nothing to render, the method returns nothing.


            }

        }
        //POST information sent through the .send() method
        rq.send(JSON.stringify(TeacherData));

    }</script>

<div id="containershow">
    <nav>
        <a class="navlink" href="/Teacher/List">Back To Teachers</a>

    </nav>
    <h2>Update @Model.TeacherFname @Model.TeacherLname</h2>
    @{
        /* AJAX Request to update teacher */
        /* No form submission needed */
        /* button onclick will handle form submission */
        /* Each item has an ID for validation && ajax submission */


    }
    <div class="inputrow">
        <label for="TeacherFname">First Name:</label>
        <input type="text" id="TeacherFname" name="TeacherFname" value="@Model.TeacherFname" />

    </div>
    <div class="inputrow">
        <label for="TeacherLname">Last Name:</label>
        <input type="text" id="TeacherLname" name="TeacherLname" value="@Model.TeacherLname" />

    </div>
    <div class="inputrow">
        <label for="EmployeeNumber">Employee Number:</label>
        <input type="text" id="EmployeeNumber" name="EmployeeNumber" value="@Model.EmployeeNumber" />
    </div>
    <div class="inputrow">
        <label for="HireDate">Hire Date:</label>
        <input type="date" id="HireDate" name="HireDate" value="@Model.HireDate" />
    </div>
    <div class="inputrow">
        <label for="Salary">Salary:</label>
        <input type="text" id="Salary" name="Salary" value="@Model.Salary" />
    </div>
    @{
        //AddTeacher() is a JS method defined in /Scripts/teacher.js
    }
    <button onclick="UpdateTeacher(@Model.TeacherId);">Update Teacher</button>
</div>

